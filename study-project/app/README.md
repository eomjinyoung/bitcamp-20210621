# 04-d. 클래스 사용법 : 의존 관계

소스 코드 관리를 위해 메서드를 여러 클래스로 분리하게 되면
반드시 클래스 간에 **의존 관계(dependency relationship)** 를 형성하게 된다.
즉, 메서드를 사용하는 클래스(client)와 메서드를 제공하는 클래스(supplier)가 생겨난다.
예를 들면, `App` 클래스에서 `MemberHandler` 클래스로 회원 데이터 처리와 관련된 메서드를 분리하는 순간
`App` 클래스와 `MemberHandler` 클래스는 의존 관계를 맺게 된다.
`App` 은 회원 데이터를 처리하기 위해 `MemberHandler` 의 메서드를 사용하는 클라이언트 입장이 되고,
`MemberHandler` 는 `App`에게 필요 메서드를 공급하는 공급자 입장이 된다.

이번 훈련에서는 *클래스 간의 의존 관계* 를 연습할 것이다.
겸사겸사하여 조건문과 반복문의 사용법도 연습해 보자.

## 훈련 목표

- 클래스 간의 의존 관계가 무엇인지 이해한다.
- 의존 관계에서 클라이언트 역할과 공급자 역할을 이해한다.
- 조건문, 반복문 등 기본 문법을 활용하여 명령의 흐름을 제어하는 것을 연습한다.

## 훈련 내용

- 프로젝트 생성자와 팀원을 등록할 때 회원 정보를 조회하여 등록한다.
- 작업 담당자를 등록할 때 회원 정보를 조회하여 등록한다.

## 실습

### 1단계 - 프로젝트 정보를 등록할 때 만든이 이름을 회원 정보에서 조회한다.

다음과 같이 *만든이* 의 이름이 유효할 경우에는 다음 입력으로 넘어간다.

```console
명령> /project/add
[프로젝트 등록]
번호? 11
프로젝트명? 미니 프로젝트 관리 시스템
내용? 소규모 팀에서 사용하기 편한 프로젝트 관리 시스템
시작일? 2020-1-1
종료일? 2020-2-2
만든이? hong
팀원?
```

다음과 같이 *만든이* 의 이름이 무효할 경우에는 오류를 알리고 다시 입력 받는다.

```console
명령> /project/add
[프로젝트 등록]
번호? 11
프로젝트명? 미니 프로젝트 관리 시스템
내용? 소규모 팀에서 사용하기 편한 프로젝트 관리 시스템
시작일? 2020-1-1
종료일? 2020-2-2
만든이? hong
등록된 회원이 아닙니다.
만든이?

```

- `MemberHandler`에 이름으로 회원 정보를 찾는 exist() 메서드를 추가한다.
- `ProjectHandler.add()`에서 `MemberHandler.exist()` 메서드를 사용하여 이름의 유효 여부를 검사한다.

#### 작업 파일

- com.eomcs.pms.handler.MemberHandler 클래스 변경
  - exist(String) 메서드 추가
- com.eomcs.pms.handler.ProjectHandler 클래스 변경
  - add() 변경
  - 백업: ProjectHandler.java.01


### 2단계 - 프로젝트의 *만든이* 이름을 입력하지 않으면 프로젝트 등록을 취소한다.

다음과 같이 *만든이* 의 이름을 입력하지 않고 엔터키를 치면 프로젝트 정보 등록을 취소한다.

```console
명령> /project/add
[프로젝트 등록]
번호? 11
프로젝트명? 미니 프로젝트 관리 시스템
내용? 소규모 팀에서 사용하기 편한 프로젝트 관리 시스템
시작일? 2020-1-1
종료일? 2020-2-2
만든이?(취소: 빈 문자열)
프로젝트 등록을 취소합니다.

명령>
```

- *만든이* 의 이름이 빈 문자열인지 여부를 검사하는 조건문을 추가한다.

#### 작업 파일

- com.eomcs.pms.handler.ProjectHandler 클래스 변경
  - add() 변경
  - 백업: ProjectHandler.java.02


### 3단계 - 프로젝트 팀원을 등록할 때 회원 정보에서 조회한다.

다음과 같이 각각의 팀원 이름을 입력 받고, 등록된 회원이 아니면 오류를 알린다.
팀원 등록을 완료하고 싶으면 빈 문자열을 입력한다.

```console
명령> /project/add
[프로젝트 등록]
번호? 11
프로젝트명? 미니 프로젝트 관리 시스템
내용? 소규모 팀에서 사용하기 편한 프로젝트 관리 시스템
시작일? 2020-1-1
종료일? 2020-2-2
만든이?(취소: 빈 문자열) 홍길동
팀원?(완료: 빈 문자열) 임꺽정
팀원?(완료: 빈 문자열) 유관순
팀원?(완료: 빈 문자열) 주윤발
등록된 회원이 아닙니다.
팀원?(완료: 빈 문자열)

명령>
```

- *팀원* 의 이름이 유효한 경우 팀원 이름을 추가한다.
- *팀원* 의 이름이 무효하면 오류를 알린다.
- *팀원* 의 이름이 빈 문자열이면 팀원 입력을 완료한다.

#### 작업 파일

- com.eomcs.pms.handler.ProjectHandler 클래스 변경
  - add() 변경
  - 백업: ProjectHandler.java.03


### 4단계 - 프로젝트 목록을 출력할 때 팀원 이름도 포함한다.

다음과 같이 프로젝트의 *만든이* 항목 옆에 팀원의 이름을 출력한다.

```console
명령> /project/list
[프로젝트 목록]
11, 프로젝트1, 2020-01-01, 2020-02-02, hong, [kim,lee,park]
12, 프로젝트2, 2020-01-15, 2020-02-15, leem, [lee,park]

명령>
```

- `list()`에서 프로젝트 목록 출력할 때 팀원 항목을 추가한다.

#### 작업 파일

- com.eomcs.pms.handler.ProjectHandler 클래스 변경
  - list() 변경


### 5단계 - 작업 정보를 등록할 때 *담당자* 이름을 회원 정보에서 조회한다.

다음과 같이 *담당자* 의 이름이 유효할 경우에는 다음 입력으로 넘어간다.

```console
명령> /task/add
[작업 등록]
번호? 100
내용? 작업입니다.
마감일? 2020-2-2
상태?
0: 신규
1: 진행중
2: 완료
> 2
담당자?(취소: 빈 문자열) hong

명령>
```

다음과 같이 *담당자* 의 이름이 무효할 경우에는 오류를 알리고 다시 입력 받는다.

```console
명령> /task/add
[작업 등록]
번호? 100
내용? 작업입니다.
마감일? 2020-2-2
상태?
0: 신규
1: 진행중
2: 완료
> 2
담당자?(취소: 빈 문자열) hong
등록된 회원이 아닙니다.
담당자?(취소: 빈 문자열)

```


다음과 같이 *담당자* 의 이름이 빈 문자열일 경우에는 등록을 취소한다.

```console
명령> /task/add
[작업 등록]
번호? 100
내용? 작업입니다.
마감일? 2020-2-2
상태?
0: 신규
1: 진행중
2: 완료
> 2
담당자?(취소: 빈 문자열)     <=== 입력 없이 엔터키 친다.
작업 등록을 취소합니다.

명령>
```

- `TaskHandler.add()`에서 `MemberHandler.exist()` 메서드를 사용하여 이름의 유효 여부를 검사한다.

#### 작업 파일

- com.eomcs.pms.handler.TaskHandler 클래스 변경
  - add() 변경


## 실습 결과

- src/main/java/com/eomcs/pms/handler/MemberHandler.java 변경
- src/main/java/com/eomcs/pms/handler/ProjectHandler.java 변경
- src/main/java/com/eomcs/pms/handler/TaskHandler.java 변경
